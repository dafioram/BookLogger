{% extends "base.html" %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="flex items-center justify-between mb-8">
        <h1 class="text-3xl font-bold text-slate-800 flex items-center gap-2">
            <span>✍️</span> Manually Add Book
        </h1>
        <a href="/search" class="text-sm text-blue-600 hover:underline font-bold">← Back to Search</a>
    </div>

    <div class="bg-white p-8 rounded-lg shadow-md border border-gray-200">
        <form action="/add_manual" method="post" class="space-y-6">
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">Book Title <span class="text-red-500">*</span></label>
                    <input type="text" name="title" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. The Hobbit">
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">Author <span class="text-red-500">*</span></label>
                    <input type="text" name="author" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. J.R.R. Tolkien">
                </div>

                <div class="grid grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">Year</label>
                        <input type="text" name="year" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="YYYY">
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">Pages</label>
                        <input type="number" name="pages" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0">
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">Audio (Mins)</label>
                        <input type="number" name="audio_minutes" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. 600">
                    </div>
                </div>
            </div>

            <details class="group bg-slate-50 border border-slate-200 rounded-lg">
                <summary class="flex justify-between items-center font-bold cursor-pointer list-none p-4 text-slate-600 hover:text-blue-600 hover:bg-slate-100 transition rounded-lg">
                    <span>➕ Add More Details (Genre, IDs, Series)</span>
                    <span class="transition group-open:rotate-180">
                        <svg fill="none" height="20" width="20" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"></path></svg>
                    </span>
                </summary>
                
                <div class="text-neutral-600 px-4 pb-4 space-y-4 border-t border-slate-200 pt-4">
                    
                    <div>
                        <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Subtitle</label>
                        <input type="text" name="subtitle" class="w-full p-2 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 outline-none text-sm" placeholder="e.g. There and Back Again">
                    </div>

                    <div class="grid grid-cols-3 gap-4">
                        <div class="col-span-2">
                            <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Series Name</label>
                            <input type="text" name="series_name" class="w-full p-2 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 outline-none text-sm" placeholder="e.g. Lord of the Rings">
                        </div>
                        <div>
                            <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Index #</label>
                            <input type="number" step="0.1" name="series_index" class="w-full p-2 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 outline-none text-sm" placeholder="1">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Publisher</label>
                            <input type="text" name="publisher" class="w-full p-2 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 outline-none text-sm">
                        </div>
                        <div>
                            <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Language</label>
                            <input type="text" name="language" value="en" class="w-full p-2 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 outline-none text-sm">
                        </div>
                        <div>
                            <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Genre(s)</label>
                            <input type="text" name="genres" class="w-full p-2 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 outline-none text-sm" placeholder="Fantasy, Sci-Fi">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 bg-slate-100 p-3 rounded-lg border border-slate-200">
                        <div>
                            <label class="block text-[10px] font-bold uppercase text-gray-500 mb-1">ISBN-13</label>
                            <input type="text" name="isbn13" class="w-full p-2 border border-gray-300 rounded text-xs font-mono">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold uppercase text-gray-500 mb-1">ASIN (Amazon)</label>
                            <input type="text" name="asin" class="w-full p-2 border border-gray-300 rounded text-xs font-mono" placeholder="B00...">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold uppercase text-gray-500 mb-1">Goodreads ID</label>
                            <input type="text" name="goodreads_id" class="w-full p-2 border border-gray-300 rounded text-xs font-mono">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold uppercase text-gray-500 mb-1">OpenLibrary ID</label>
                            <input type="text" name="olid" class="w-full p-2 border border-gray-300 rounded text-xs font-mono" placeholder="OL...">
                        </div>
                    </div>

                    <div>
                        <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Cover Image URL</label>
                        <input type="text" name="cover_url" class="w-full p-2 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 outline-none text-sm text-gray-500" placeholder="https://...">
                        <p class="text-[10px] text-gray-400 mt-1">Leave blank to use default placeholder.</p>
                    </div>
                    
                    <div>
                        <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Summary / Description</label>
                        <textarea name="summary" rows="4" class="w-full p-2 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 outline-none text-sm"></textarea>
                    </div>

                </div>
            </details>

            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">Format Owned</label>
                        <select name="format_owned" class="w-full p-3 bg-white border border-gray-300 rounded-lg">
                            <option value="Physical">Physical (Book)</option>
                            <option value="Kindle">Kindle (E-Book)</option>
                            <option value="Audible">Audible (Audio)</option>
                            <option value="Libby eBook">Libby (E-Book)</option>
                            <option value="Libby Audiobook">Libby (Audio)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">Initial Status</label>
                        <select name="status" class="w-full p-3 bg-white border border-gray-300 rounded-lg">
                            <option value="Shelved">Shelved (Unread)</option>
                            <option value="On Deck">On Deck</option>
                            <option value="Read">Read (Completed)</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="pt-4">
                <button type="submit" class="w-full bg-slate-800 hover:bg-slate-700 text-white font-bold py-3 rounded-lg shadow-lg transition transform hover:scale-[1.01]">
                    Add Book to Library
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}